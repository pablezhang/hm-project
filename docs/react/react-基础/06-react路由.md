# å•é¡µåº”ç”¨ç¨‹åº

- SPAï¼š `Single Page Application`  å•é¡µé¢åº”ç”¨ç¨‹åºï¼Œæ•´ä¸ªåº”ç”¨ä¸­åªæœ‰ä¸€ä¸ªé¡µé¢ï¼ˆindex.htmlï¼‰
- MPA : `Multiple Page Application`å¤šé¡µé¢åº”ç”¨ç¨‹åºï¼Œæ•´ä¸ªåº”ç”¨ä¸­æœ‰å¾ˆå¤šä¸ªé¡µé¢ï¼ˆ*.htmlï¼‰

[SPA ](https://baike.baidu.com/item/SPA/17536313?fr=aladdin)
[ç½‘æ˜“äº‘éŸ³ä¹](https://music.163.com/)

## ä¼˜åŠ¿

1. åŠ å¿«é¡µé¢å“åº”é€Ÿåº¦ï¼Œé™ä½äº†å¯¹æœåŠ¡å™¨çš„å‹åŠ›
   - ä¼ ç»Ÿçš„å¤šé¡µé¢åº”ç”¨ç¨‹åºï¼Œæ¯æ¬¡è¯·æ±‚æœåŠ¡å™¨è¿”å›çš„éƒ½æ˜¯ä¸€æ•´ä¸ªå®Œæ•´çš„é¡µé¢
   - å•é¡µé¢åº”ç”¨ç¨‹åºåªæœ‰ç¬¬ä¸€æ¬¡ä¼šåŠ è½½å®Œæ•´çš„é¡µé¢ï¼Œä»¥åæ¯æ¬¡è¯·æ±‚ä»…ä»…è·å–å¿…è¦çš„æ•°æ®
2. æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè¿è¡Œæ›´åŠ æµç•…

![å•é¡µvså¤šé¡µ](images/å•é¡µvså¤šé¡µ-16297300974361.png)

## ç¼ºç‚¹

**ä¸åˆ©äº SEO** æœç´¢å¼•æ“ä¼˜åŒ– 

- å› ä¸º çˆ¬è™« åªçˆ¬å– HTML é¡µé¢ä¸­çš„æ–‡æœ¬å†…å®¹ï¼Œä¸ä¼šæ‰§è¡Œ JS ä»£ç 
- å¯ä»¥é€šè¿‡ SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ Server Side Renderingï¼‰æ¥è§£å†³ SEO é—®é¢˜
  - è§£é‡Šï¼šå…ˆåœ¨æœåŠ¡å™¨ç«¯æŠŠå†…å®¹æ¸²æŸ“å‡ºæ¥ï¼Œç„¶åï¼Œè¿”å›ç»™æµè§ˆå™¨çš„å°±æ˜¯çº¯ HTML å†…å®¹äº†
- é¡µé¢é™æ€åŒ–ï¼Œæ¯”å¦‚ï¼Œå¯¹äºä¸€ä¸ªç”µå•†åº”ç”¨å¯ä»¥ä¸ºæ¯ä¸€ä¸ªå•†å“ç”Ÿäº§ä¸€ä¸ªé™æ€çš„HTMLé¡µé¢ï¼Œé™æ€ HTML é¡µé¢ä¸­æ˜¯å¸¦æœ‰æ–‡å­—å†…å®¹çš„ï¼Œæ‰€ä»¥ï¼Œæœ‰åˆ©äº SEO çš„

---



# React è·¯ç”±

- React è·¯ç”±ä»‹ç»
- è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨
- è·¯ç”±çš„æ‰§è¡Œè¿‡ç¨‹
- è·¯ç”±çš„å¸¸ç”¨æ“ä½œ

## React è·¯ç”±ä»‹ç»

ç°ä»£çš„å‰ç«¯åº”ç”¨å¤§å¤šéƒ½æ˜¯ SPAï¼ˆå•é¡µåº”ç”¨ç¨‹åºï¼‰ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ä¸€ä¸ª HTML é¡µé¢çš„åº”ç”¨ç¨‹åºã€‚å› ä¸ºå®ƒçš„ç”¨æˆ·ä½“éªŒæ›´å¥½ã€å¯¹æœåŠ¡å™¨çš„å‹åŠ›æ›´å°ï¼Œæ‰€ä»¥æ›´å—æ¬¢è¿ã€‚ä¸ºäº†**æœ‰æ•ˆçš„ä½¿ç”¨å•ä¸ªé¡µé¢æ¥ç®¡ç†åŸæ¥å¤šé¡µé¢çš„åŠŸèƒ½ï¼Œå‰ç«¯è·¯ç”±åº”è¿è€Œç”Ÿ**ã€‚å‰ç«¯è·¯ç”±çš„åŠŸèƒ½ï¼šè®©ç”¨æˆ·ä»ä¸€ä¸ªè§†å›¾ï¼ˆé¡µé¢ï¼‰å¯¼èˆªåˆ°å¦ä¸€ä¸ªè§†å›¾ï¼ˆé¡µé¢ï¼‰

- å‰ç«¯è·¯ç”±æ˜¯ä¸€å¥—**æ˜ å°„è§„åˆ™**ï¼Œåœ¨Reactä¸­ï¼Œæ˜¯ *URLè·¯å¾„* ä¸ *ç»„ä»¶* çš„å¯¹åº”å…³ç³» 
- ä½¿ç”¨ React è·¯ç”±ç®€å•æ¥è¯´å°±æ˜¯ï¼šé…ç½®è·¯å¾„å’Œç»„ä»¶ï¼ˆé…å¯¹ï¼‰

![è·¯ç”±æ˜¯ä¸€å¥—è§„åˆ™1](images/è·¯ç”±æ˜¯ä¸€å¥—è§„åˆ™1-16297300974362.png)
![è·¯ç”±æ˜¯ä¸€å¥—è§„åˆ™2](images/è·¯ç”±æ˜¯ä¸€å¥—è§„åˆ™2-16297300974363.png)





## æ¨¡æ‹Ÿè·¯ç”±çš„å®ç°

```jsx
import React, { PureComponent } from 'react'
import ReactDOM from 'react-dom'
import Home from './pages/Home'
import My from './pages/My'
import Friend from './pages/Friend'
class App extends PureComponent {
  state = {
    currentHash: '',
  }
  // hashchange: é”šç‚¹å€¼ï¼ˆhashï¼‰æ”¹å˜å°±ä¼šè§¦å‘
  componentDidMount() {
    // æ³¨å†Œäº‹ä»¶ï¼Œ æ³¨æ„hashchangeä¸è¦å†™æˆé©¼å³°å¼ï¼Œè¿™æ˜¯åŸç”ŸJSçš„è¯­æ³•
    window.addEventListener('hashchange', () => {
      console.log('hashå€¼å˜äº†', window.location.hash)
      this.setState({
        currentHash: window.location.hash.slice(1),
      })
    })
  }
  render() {
    const { currentHash } = this.state
    return (
      <div>
        <h1>appç»„ä»¶</h1>
        <ul>
          <li>
            <a href="#/home">é¦–é¡µ</a>
          </li>
          <li>
            <a href="#/my">æˆ‘çš„éŸ³ä¹</a>
          </li>
          <li>
            <a href="#/friend">æˆ‘çš„æœ‹å‹</a>
          </li>
        </ul>
        {currentHash === '/home' && <Home></Home>}
        {currentHash === '/my' && <My></My>}
        {currentHash === '/friend' && <Friend></Friend>}
      </div>
    )
  }
}

// æ¸²æŸ“ç»„ä»¶
ReactDOM.render(<App />, document.getElementById('root'))

```



## Vueè·¯ç”±å¤ä¹ 

1. ä¸‹åŒ… vue-routerã€å¯¼å…¥VueRouter

2. é…ç½®è§„åˆ™å¯¹è±¡æ•°ç»„ï¼š

   1. ```
      [{
         path: "/home"ï¼Œ
         component: Homeï¼Œ
         children: [
          path: "index"
         ]
      }]
      ```

3. å®ä¾‹åŒ–è·¯ç”±ï¼šnew VueRouter()

4. è®¾ç½®æŒ‚è½½ç‚¹ router-view

5. è·³è½¬è·¯å¾„ï¼šrouter-link



# è·¯ç”±åŸºæœ¬ä½¿ç”¨

å®˜ç½‘ï¼šhttps://reactrouter.com/



## åŸºæœ¬æ­¥éª¤

+ å®‰è£…

```js
yarn add react-router-dom@5.3
npm i react-router-dom@5.3
```

+ `react-router-dom`è¿™ä¸ªåŒ…æä¾›äº†ä¸‰ä¸ªæ ¸å¿ƒçš„ç»„ä»¶

```js
import { HashRouter, Route, Link } from 'react-router-dom'
```

+ ä½¿ç”¨`HashRouter`åŒ…è£¹æ•´ä¸ªåº”ç”¨ï¼Œä¸€ä¸ªé¡¹ç›®ä¸­åªä¼šæœ‰ä¸€ä¸ªRouter

```js
<HashRouter>
    <div className="App">
    // â€¦ çœç•¥é¡µé¢å†…å®¹
    </div>
</HashRouter>
```

+ ä½¿ç”¨LinkæŒ‡å®šå¯¼èˆªé“¾æ¥

```js
<Link to="/first">é¡µé¢ä¸€</Link>
<Link to="/two">é¡µé¢äºŒ</Link>
```

+ ä½¿ç”¨`Route`æŒ‡å®šè·¯ç”±è§„åˆ™

```js
// åœ¨å“ªé‡Œå†™çš„Route,æœ€ç»ˆåŒ¹é…åˆ°çš„ç»„ä»¶å°±ä¼šæ¸²æŸ“åˆ°è¿™
<Route path="/first" component={First}></Route>
```



æ³¨æ„ï¼š

1. ğŸ’¥ä½¿ç”¨RouteråŒ…ä½æ•´ä¸ªåº”ç”¨ï¼Œä¸€èˆ¬é¡¹ç›®ä¸­åªä¼šæœ‰ä¸€ä¸ªRouterã€‚
2. ğŸ’¥ Routeå†™åœ¨Routerä¹‹å†…ï¼Œä¸èƒ½å†™åœ¨Routerä¹‹å¤–ã€‚





## Routerè¯¦ç»†è¯´æ˜

+ Router ç»„ä»¶ï¼šåŒ…è£¹æ•´ä¸ªåº”ç”¨ï¼Œä¸€ä¸ª React åº”ç”¨åªéœ€è¦ä½¿ç”¨ä¸€æ¬¡
+ ä¸¤ç§å¸¸ç”¨ Routerï¼š`HashRouter` å’Œ `BrowserRouter`  
+ HashRouterï¼šä½¿ç”¨ URL çš„å“ˆå¸Œå€¼å®ç°ï¼ˆhttp://localhost:3000/#/firstï¼‰
  - åŸç†ï¼šç›‘å¬ window çš„ `hashchange` äº‹ä»¶æ¥å®ç°çš„
+ ï¼ˆæ¨èï¼‰BrowserRouterï¼šä½¿ç”¨ H5 çš„ history API å®ç°ï¼ˆhttp://localhost:3000/firstï¼‰
  - åŸç†ï¼šç›‘å¬ window çš„ `popstate` äº‹ä»¶æ¥å®ç°çš„



ğŸ‘ æœ€ä½³å®è·µï¼š ä½¿ç”¨asè¯­æ³•å°†é‡å‘½åä¸ºRouter

```js
import { HashRouter as Router, Route, Link } from 'react-router-dom'
// import { BrowserRouter as Router, Route, Link } from 'react-router-dom'
```



## Linkä¸NavLink 

`Link`ç»„ä»¶æœ€ç»ˆä¼šæ¸²æŸ“æˆaæ ‡ç­¾ï¼Œç”¨äºæŒ‡å®šè·¯ç”±å¯¼èˆª

+ toå±æ€§ï¼Œå°†æ¥ä¼šæ¸²æŸ“æˆaæ ‡ç­¾çš„hrefå±æ€§
+ `Link`ç»„ä»¶æ— æ³•å®ç°å¯¼èˆªçš„é«˜äº®æ•ˆæœ

`NavLink`ç»„ä»¶ï¼Œä¸€ä¸ªæ›´ç‰¹æ®Šçš„`Link`ç»„ä»¶ï¼Œå¯ä»¥ç”¨ç”¨äºæŒ‡å®šå½“å‰å¯¼èˆªé«˜äº®

+ toå±æ€§ï¼Œç”¨äºæŒ‡å®šåœ°å€ï¼Œä¼šæ¸²æŸ“æˆaæ ‡ç­¾çš„hrefå±æ€§
+ activeClassName: ç”¨äºæŒ‡å®šé«˜äº®çš„ç±»åï¼Œé»˜è®¤`active`
+ exact: ç²¾ç¡®åŒ¹é…ï¼Œè¡¨ç¤ºå¿…é¡»ç²¾ç¡®åŒ¹é…ç±»åæ‰ç”Ÿæ•ˆ



æ³¨æ„ï¼š

1. ğŸ‘ æ¨èï¼š ä½¿ç”¨LInk NavLinkæ›¿ä»£aæ ‡ç­¾.
   1. `Link`  `NavLink` ä¼šæ ¹æ®è·¯ç”±æ¨¡å¼ï¼Œè‡ªåŠ¨åˆ¤æ–­æ˜¯å¦åŠ #ã€‚
   2. aæ ‡ç­¾ä¸ä¼šã€‚









## Route

- path çš„è¯´æ˜
  - å¦‚æœ path çš„è·¯å¾„åŒ¹é…ä¸Šäº†ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯¹åº”çš„ç»„ä»¶å°±ä¼šè¢« render
  
  - å¦‚æœ path æ²¡æœ‰åŒ¹é…ä¸Šï¼Œé‚£ä¹ˆä¼š render null
  
  - **é»˜è®¤æƒ…å†µä¸‹ï¼Œpath="/"**   => èƒ½å¤ŸåŒ¹é…ä»»æ„/å¼€å§‹çš„è·¯å¾„
  
  - **å¦‚æœæ²¡æœ‰æŒ‡å®š path**ï¼Œé‚£ä¹ˆä¸€å®šä¼šè¢«æ¸²æŸ“
  
- exact çš„è¯´æ˜ï¼Œ exact è¡¨ç¤ºç²¾ç¡®åŒ¹é…æŸä¸ªè·¯å¾„

  `<Route exact path="/login" component={Login}/>` 







## Switchä¸404



+ é€šå¸¸ï¼ŒğŸ‘ æˆ‘ä»¬ä¼šæŠŠ`Route`åŒ…è£¹åœ¨ä¸€ä¸ª`Switch`ç»„ä»¶ä¸­ã€‚

+ åœ¨`Switch`ç»„ä»¶ä¸­ï¼ŒåŒ¹é…åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„ç»„ä»¶ï¼Œåœæ­¢å‘ä¸‹åŒ¹é…ã€‚
+ `<Route>`ä¸å†™`path`ï¼Œé…åˆ`<Switch>` å®ç°404é¡µé¢çš„æç¤º

```js
<Switch>
  <Route exact path="/" component={Home}/>
  <Route path="/about" component={About}/>
  <Route path="/user" component={User}/>
   //<Route>ä¸å†™`path`ï¼Œé…åˆ`<Switch>` å®ç°404é¡µé¢çš„æç¤º
  <Route component={NoMatch}/>
</Switch>
```



```
<Redirect path='/' to='/home'} />
```

# åµŒå¥—è·¯ç”±çš„é…ç½®

+ åœ¨Reactä¸­ï¼Œé…ç½®åµŒå¥—è·¯ç”±éå¸¸çš„ç®€å•ï¼Œå› ä¸º`Route`å°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥åœ¨ä»»æ„æƒ³é…ç½®çš„åœ°æ–¹è¿›è¡Œé…ç½®

+ ä½†æ˜¯é…ç½®åµŒå¥—è·¯ç”±çš„æ—¶å€™ï¼Œéœ€è¦å¯¹è·¯å¾„è¿›è¡Œå¤„ç†ï¼Œå¿…é¡»è¦å…ˆåŒ¹é…åˆ°çˆ¶çº§è·¯ç”±ï¼Œæ‰èƒ½åŒ¹é…åˆ°å­è·¯ç”±

```js
// é€šè¿‡/homeå¯ä»¥åŒ¹é…Homeçˆ¶ç»„ä»¶  å†é€šè¿‡/liståŒ¹é…å­ç»„ä»¶
<Route path="/home/list" component={List} />
```



æ³¨æ„ï¼š

+ å­ç»„ä»¶ä¸­ä¸éœ€è¦å†è®¾ç½®<Router>
+ å­ç»„ä»¶ä¸­æœ‰å¤šä¸ªè·¯ç”± ï¼ŒğŸ‘æ¨èä½¿ç”¨<Switch> ç»„ä»¶åŒ…è£¹æ‰€æœ‰çš„<Router> ç»„ä»·









# ç¼–ç¨‹å¼å¯¼èˆª 

+  åœºæ™¯ï¼šç‚¹å‡»ç™»å½•æŒ‰é’®ï¼Œç™»å½•æˆåŠŸåï¼Œé€šè¿‡ä»£ç è·³è½¬åˆ°åå°é¦–é¡µï¼Œå¦‚ä½•å®ç°ï¼Ÿ
+  ç¼–ç¨‹å¼å¯¼èˆªï¼šé€šè¿‡ JS ä»£ç æ¥å®ç°é¡µé¢è·³è½¬
+  history æ˜¯ React è·¯ç”±æä¾›çš„ï¼Œç”¨äºè·å–æµè§ˆå™¨å†å²è®°å½•çš„ç›¸å…³ä¿¡æ¯ã€‚é€šè¿‡props.historyè·å–ã€‚
+  push(path)ï¼šè·³è½¬åˆ°æŸä¸ªé¡µé¢ï¼Œå‚æ•° path è¡¨ç¤ºè¦è·³è½¬çš„è·¯å¾„
+  go(n)ï¼š å‰è¿›æˆ–åé€€åˆ°æŸä¸ªé¡µé¢ï¼Œå‚æ•° n è¡¨ç¤ºå‰è¿›æˆ–åé€€é¡µé¢æ•°é‡ï¼ˆæ¯”å¦‚ï¼š-1 è¡¨ç¤ºåé€€åˆ°ä¸Šä¸€é¡µï¼‰

```js
class Login extends Component {
    handleLogin = () => {
        // ...
        this.props.history.push('/home')
    }
    render() {...çœç•¥å…¶ä»–ä»£ç }
}
```



æ³¨æ„ï¼š

1. ğŸ’¥åªæœ‰è¢«<Route component={ç»„ä»¶å}> è®¾ç½®è¿‡è·¯å¾„çš„ç»„ä»¶ï¼Œpropsä¸Šæ‰æœ‰historyã€‚
2. ğŸ’¥`HashRoute` ä¸`BroswerRoute` ä¸¤ç§æ¨¡å¼ä¸‹éƒ½å…·æœ‰history



æ€»ç»“ï¼š

1. `history` å±æ€§ æ˜¯ `React è·¯ç”±` æä¾›çš„ï¼Œé€šè¿‡`props.history` è·å–ã€‚
2. `history.push('/è·¯å¾„å')` ï¼šè¡¨ç¤ºè·³è½¬åˆ°æŒ‡å®šçš„è·¯å¾„ã€‚
3. `history.go(n)`  è¡¨ç¤ºå‰è¿›æˆ–åé€€ã€‚å‚æ•° n è¡¨ç¤ºå‰è¿›æˆ–åé€€é¡µé¢æ•°é‡ï¼ˆæ¯”å¦‚ï¼š-1 è¡¨ç¤ºåé€€åˆ°ä¸Šä¸€é¡µï¼‰





# åŠ¨æ€è·¯ç”±ä¸è·¯ç”±å‚æ•°è·å–

+ å¯ä»¥ä½¿ç”¨`:id`çš„æ–¹å¼æ¥é…ç½®åŠ¨æ€çš„è·¯ç”±å‚æ•°

```js
// å¯ä»¥åŒ¹é… /users/1  /users/2  /users/xxx
<Route path="/users/:id" component={Users} />
```

+ åœ¨ç»„ä»¶ä¸­ï¼Œé€šè¿‡`props`å¯ä»¥æ¥æ”¶åˆ°è·¯ç”±çš„å‚æ•°

```js
render(){
    console.log(this.props.match.params)
}
```

































































